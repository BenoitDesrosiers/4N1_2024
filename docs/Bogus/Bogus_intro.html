<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Bogus/Bogus_intro" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Bogus Introduction | Notes de cours 4N1 2024</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/4N1_2024/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/4N1_2024/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/4N1_2024/docs/Bogus/Bogus_intro"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Bogus Introduction | Notes de cours 4N1 2024"><meta data-rh="true" name="description" content="Pour générer une grosse quantité de données, il n&#x27;est pas réaliste de le faire manuellement."><meta data-rh="true" property="og:description" content="Pour générer une grosse quantité de données, il n&#x27;est pas réaliste de le faire manuellement."><link data-rh="true" rel="icon" href="/4N1_2024/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/4N1_2024/docs/Bogus/Bogus_intro"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/4N1_2024/docs/Bogus/Bogus_intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/4N1_2024/docs/Bogus/Bogus_intro" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/4N1_2024/blog/rss.xml" title="Notes de cours 4N1 2024 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/4N1_2024/blog/atom.xml" title="Notes de cours 4N1 2024 Atom Feed"><link rel="stylesheet" href="/4N1_2024/assets/css/styles.f6e1b814.css">
<script src="/4N1_2024/assets/js/runtime~main.5be5584f.js" defer="defer"></script>
<script src="/4N1_2024/assets/js/main.a514fefe.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/4N1_2024/"><div class="navbar__logo"><img src="/4N1_2024/img/logo420.svg" alt="Cégep de Drummondville" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/4N1_2024/img/logo420.svg" alt="Cégep de Drummondville" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">4n1 Native III</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/4N1_2024/docs/Preparation/preparation_environnement">Notes de cours</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/Preparation/preparation_environnement">Preparation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/Intro Csharp/Introduction_CSharp">Intro Csharp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/Révision SQL/introduction_SQL_Server">Révision SQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/LINQ/app_sans_main">LINQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/Entity Framework/solid">Entity Framework</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/Entity Framework 2/EF_navigation">Entity Framework 2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/4N1_2024/docs/Bogus/Bogus_intro">Bogus</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4N1_2024/docs/Bogus/Bogus_intro">Bogus Introduction</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/Injection de dépendance/preparation_projet">Injection de dépendance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/WPF/partie_1">WPF</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/WPF partie 2/wpf2_xaml">WPF partie 2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4N1_2024/docs/Enseignant/a_planning">Enseignant</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/4N1_2024/docs/ressources">Liens</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/4N1_2024/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Bogus</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Bogus Introduction</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Bogus Introduction</h1>
<p>Pour générer une grosse quantité de données, il n&#x27;est pas réaliste de le faire manuellement.</p>
<p>Les données créées manuellement n&#x27;auront pas de grandes variabilités et seront peu crédibles pour un utilisateur.</p>
<p>Il existe des librairies de génération de données. Elles sont appelées <strong>Faker</strong> dans la plupart des cas.</p>
<p>Une librairie populaire pour <strong>C#</strong> est <strong>Bogus</strong>.</p>
<p>Pour plus d&#x27;information sur la librairie : <a href="https://github.com/bchavez/Bogus" target="_blank" rel="noopener noreferrer">https://github.com/bchavez/Bogus</a></p>
<p>La librairie contient une banque de données pour générer des noms de personnes, nom de villes, nom de compagnies, des numéros de téléphone, des phrases...</p>
<p>Il est toujours préférable d&#x27;utiliser une valeur proche de la réalité.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="base-de-données-exemple">Base de données exemple<a href="#base-de-données-exemple" class="hash-link" aria-label="Direct link to Base de données exemple" title="Direct link to Base de données exemple">​</a></h2>
<p>Pour ce document, une nouvelle base de données sera utilisée. La base de données est pour la gestion de livres dans des magasins. Elle contient tous les cas nécessaires pour le <strong>TP 2</strong>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Pour cet exemple, nous allons utiliser la méthode <strong>Database first</strong> afin de générer le modèle à partir de la base de données.</p></div></div>
<p>Voici le DEA.</p>
<img src="/4N1_2024/img/11_dea_livre.jpg">
<p>Voici le script pour créer une base de données.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--IMPORTANT, ne pas oublier de mettre votre eDA après le nom de la BD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> DB_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;eDA_4N1_GestionLivre&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">----Mettre votre eDA</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> eDA_4N1_GestionLivre </span><span class="token comment" style="color:#999988;font-style:italic">----Mettre votre eDA</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">USE</span><span class="token plain"> eDA_4N1_GestionLivre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> OBJECT_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;LivreAuteur&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> LivreAuteur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> OBJECT_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Inventaire&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Inventaire</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> OBJECT_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Auteur&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Auteur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> OBJECT_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Magasin&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> OBJECT_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Livre&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Livre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> OBJECT_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Editeur&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Editeur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> OBJECT_ID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Collection&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Collection</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Collection</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	CollectionId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> PK_Collection </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IDENTITY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	NomCollection </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Description</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">250</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Editeur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	EditeurId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> PK_Editeur </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IDENTITY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Nom </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">150</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	SiteWeb </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Telephone </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Livre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	LivreId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> PK_Livre </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IDENTITY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Titre </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Resume</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	DatePublication </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Prix </span><span class="token keyword" style="color:#00009f">DECIMAL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	NbPage </span><span class="token keyword" style="color:#00009f">SMALLINT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Categorie </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> CK_Livre_Categorie </span><span class="token keyword" style="color:#00009f">CHECK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Categorie </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Jeunesse&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Biographie&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Policier&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	CollectionId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> FK_Livre_CollectionId </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Collection</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CollectionId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	EditeurId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> FK_Livre_EditeurId </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> Editeur</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EditeurId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	MagasinId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> PK_MAgasin </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IDENTITY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Nom </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">150</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Adresse </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Ville  </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	CodePostal </span><span class="token keyword" style="color:#00009f">CHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Auteur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	AuteurId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> PK_Auteur </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IDENTITY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Prenom </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Nom </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Biographie </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	DateNaissance </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	DateDeces </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> Inventaire</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	LivreId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> FK_Inventaire_LivreId </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> Livre</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LivreId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	MagasinId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> FK_Inventaire_MagasinId </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> Magasin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MagasinId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	Quantite </span><span class="token keyword" style="color:#00009f">SMALLINT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> PK_Inventaire </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LivreId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> MagasinId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> LivreAuteur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	LivreId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> FK_LivreAuteur_LivreId </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> Livre</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LivreId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	AuteurId </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> FK_LivreAuteur_AuteurId </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> Auteur</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AuteurId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> PK_LivreAuteur </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LivreId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AuteurId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nouvelle-application-console">Nouvelle application console<a href="#nouvelle-application-console" class="hash-link" aria-label="Direct link to Nouvelle application console" title="Direct link to Nouvelle application console">​</a></h2>
<p>Créez une application console.</p>
<p>Nommez cette application <strong>GenerateurBDGestionLivre</strong>.</p>
<p>Cette application utilisera directement le contexte et les générateurs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="génération-du-contexte">Génération du contexte<a href="#génération-du-contexte" class="hash-link" aria-label="Direct link to Génération du contexte" title="Direct link to Génération du contexte">​</a></h3>
<p>Installez les 2 librairies ci-dessous.</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Install-Package Microsoft.EntityFrameworkCore.SqlServer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Install-Package Microsoft.EntityFrameworkCore.Tools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ensuite, générez le contexte avec <strong>Scaffold-Dbcontext</strong>.</p>
<p>Voici la commande sans l&#x27;erreur du <strong>SSL</strong>. Pensez à utiliser votre DA.</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Scaffold-DbContext &quot;Server=localhost\SQLExpress;Database=eDA_4N1_GestionLivre;Trusted_Connection=True;&quot; Microsoft.EntityFrameworkCore.SqlServer -Context GestionLivreContext -OutputDir Data -ContextDir Data\Context -NoPluralize -Force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voici  la commande si vous avez l&#x27;erreur du <strong>SSL</strong>.</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Scaffold-DbContext &quot;Server=localhost\SQLExpress;Database=eDA_4N1_GestionLivre;Trusted_Connection=True;Trust Server Certificate=true;&quot; Microsoft.EntityFrameworkCore.SqlServer -Context GestionLivreContext -OutputDir Data -ContextDir Data\Context -NoPluralize -Force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Cette commande va générer le contexte ainsi que les classes pour représenter la bd dans le sous-répertoire <strong>Data</strong> du projet.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fichier-programcs">Fichier Program.cs<a href="#fichier-programcs" class="hash-link" aria-label="Direct link to Fichier Program.cs" title="Direct link to Fichier Program.cs">​</a></h3>
<p>Modifiez le fichier <strong>Program.cs</strong> pour celui-ci.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data.Context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using (GestionLivreContext db = new GestionLivreContext())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Logique</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bogus">Bogus<a href="#bogus" class="hash-link" aria-label="Direct link to Bogus" title="Direct link to Bogus">​</a></h2>
<p>Lorsqu&#x27;un générateur de données est utilisé, il est important d&#x27;avoir des données réalistes. Si les données n&#x27;ont aucun sens, il sera difficile à l&#x27;utilisateur de comprendre les différents champs des formulaires et des listes de l&#x27;application.</p>
<p>La librairie <strong>Bogus</strong> contient plusieurs modules pour générer des données en fonction d&#x27;un thème. En voici quelques-uns.</p>
<ul>
<li>Company : En lien avec des compagnies</li>
<li>Address : En lien avec les adresses.</li>
<li>Name : En lien avec des personnes.</li>
<li>Lorem : En lien avec de la génération de mots ou de textes.</li>
<li>Finance : En lien avec des achats.</li>
<li>Date : En lien avec les dates</li>
</ul>
<p>Pour avoir les <strong>modules disponibles</strong> pour avoir des données réalistes, veuillez consulter la liste : <a href="https://github.com/bchavez/Bogus#bogus-api-support" target="_blank" rel="noopener noreferrer">https://github.com/bchavez/Bogus#bogus-api-support</a></p>
<p>Il est donc important de choisir la bonne librairie pour générer des valeurs en fonction du champ.</p>
<p>Il est possible d&#x27;ajouter de la logique au générateur pour avoir des données plus réalistes encore.</p>
<p>La librairie <strong>Bogus</strong> génère des valeurs pour des objets et non directement pour une base de données. Lorsqu&#x27;une application utilise un <strong>ORM</strong>, il est possible d&#x27;utiliser un générateur d&#x27;objet sur les classes du modèle. Ces objets peuvent être ensuite ajoutés à la base de données.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-de-la-librairie">Installation de la librairie<a href="#installation-de-la-librairie" class="hash-link" aria-label="Direct link to Installation de la librairie" title="Direct link to Installation de la librairie">​</a></h2>
<p>Dans la <strong>Console du Gestionnaire de package</strong>, inscrivez ceci.</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Install-Package Bogus</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classe-generateur">Classe Generateur<a href="#classe-generateur" class="hash-link" aria-label="Direct link to Classe Generateur" title="Direct link to Classe Generateur">​</a></h2>
<p>Dans ce document, les générateurs seront créés par héritage de la classe <strong><code>Faker&lt;T&gt;</code></strong>. Le <strong><code>&lt;T&gt;</code></strong> correspond à la classe du générateur.</p>
<p>Dans la documentation de <strong>Bogus</strong>, il existe plusieurs techniques. Par contre, celle par héritage permet de créer une classe qui contient toute la logique de génération de données.</p>
<p>La classe est séparée en 3 sections.</p>
<ul>
<li>
<p><strong>Constructeurs</strong></p>
<p>Le constructeur permet d&#x27;associer une propriété  à une méthode de génération.</p>
<p>La méthode <strong><code>RuleFor(i =&gt; i.[Propriete], Gen[Propriete])</code></strong> permet de faire le lien.</p>
</li>
<li>
<p><strong>Méthode de génération</strong></p>
<p>La méthode de génération contient la logique pour générer une valeur pour une propriété.</p>
<p>La méthode aura cette signature <strong><code>[Type Propriete] Gen[Propriete](Faker f)</code></strong> .</p>
</li>
<li>
<p><strong>Méthode d&#x27;assignation des dépendances (clé étrangère) - facultatif</strong></p>
<p>Une méthode d&#x27;assignation des dépendances permet d&#x27;indiquer les dépendances disponibles pour cette classe.</p>
</li>
</ul>
<h1>Validation</h1>
<p>Il est important que le données générées soient valides pour la base de données.</p>
<p>Il faut que les contraintes de type et spécifiques soient respectées.</p>
<p>Il est possible d&#x27;utiliser des librairies spécialisées pour ceci.</p>
<p>Pour les besoins du <strong>TP 2</strong>, les méthodes de générations s&#x27;assureront que les données soient valides.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extension-de-string---tronquer">Extension de string - Tronquer<a href="#extension-de-string---tronquer" class="hash-link" aria-label="Direct link to Extension de string - Tronquer" title="Direct link to Extension de string - Tronquer">​</a></h2>
<p>Pour la longueur maximale des chaines de caractères, il faudra <strong>tronquer</strong> la chaine si elle est trop grande.</p>
<p>Créez la classe d&#x27;extension <strong>StringExtensions</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// Classe qui contient les extensions pour les données de type string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class StringExtensions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Permet de tronquer une string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;param name=&quot;s&quot;&gt;string à tronquer&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;param name=&quot;maxLongueur&quot;&gt;Longueur maximum de la chaine&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;returns&gt;string tronqué&lt;/returns&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static string? Tronquer(this string? s, int maxLongueur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Verifie si la chaine est plus grande que la longueur maximale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (s?.Length &gt; maxLongueur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //La chaine est plus grande que la longueur maximamle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Retourne uniquement la partie de la longueur maximale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return s.Substring(0, maxLongueur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //La chaine est plus petite que la longueur maximale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Retourne la chaine originale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return s;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Table Collection</h1>
<p>La table <strong>Collection</strong> consiste aux collections de livres. Généralement, un livre fait partie d&#x27;une collection de livres.</p>
<p>La table possède 2 champs.</p>
<ul>
<li>
<p><strong>NomCollection</strong></p>
<p>Le meilleur générateur pour le nom d&#x27;une collection serait un générateur de mots dans le module <strong>Random</strong>.</p>
</li>
<li>
<p><strong>Description</strong></p>
<p>Le meilleur générateur pour la description serait un générateur de phrase dans le module <strong>Lorem</strong>.</p>
</li>
</ul>
<p>Créez la classe <strong>CollectionGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CollectionGenerateur : Faker&lt;Collection&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public CollectionGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Pour faire l&#x27;association entre une propriété et une méthode de génération, il faut utiliser la méthode RuleFor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.NomCollection, GenNomCollection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.Description, GenDescription);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public Collection Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenNomCollection(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La méthode Words permet de générer des mots.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Si aucun paramètre n&#x27;est spécifié, il y aura entre 1 et 3 mots.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Le type est VARCHAR(50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Random.Words().Tronquer(50)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string? GenDescription(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //La méthode Sentence permet de générer une phrase de quelques mots.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Le type est VARCHAR(250)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La probabilité du null est de 20%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Lorem.Sentence().Tronquer(250).OrNull(f, 0.2f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La table <strong>Collection</strong> n&#x27;a aucune dépendance. Elle a donc seulement le constructeur et les méthodes de génération.</p>
<p>Ce générateur est assez simple, car les modules de <strong>Bogus</strong> sont suffisants pour créer des données.</p>
<p>Voici le constructeur.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public CollectionGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Pour faire l&#x27;association entre une propriété et une méthode de génération, il faut utiliser la méthode RuleFor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	RuleFor(i =&gt; i.NomCollection, GenNomCollection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	RuleFor(i =&gt; i.Description, GenDescription);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Il y a 2 propriétés à générer pour la classe <strong>Collection</strong>. Si la clé primaire est <strong>autogénérée</strong> par la base de données, il est important de ne pas la générer avec <strong>Bogus</strong>. Il faut générer uniquement les propriétés qu&#x27;un utilisateur spécifierait normalement.</p>
<p>Pour la propriété <strong>NomCollection</strong>, ce sera un générateur de mots.</p>
<p>Il est important que les mots ne dépassent pas le 50 caractères, car le type <strong>SQL</strong> est <strong>VARCHAR(50)</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private string GenNomCollection(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//La méthode Words permet de générer des mots.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Si aucun paramètre n&#x27;est spécifié, il y aura entre 1 et 3 mots.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Le type est VARCHAR(50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	return f.Random.Words().Tronquer(50)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pour la propriété <strong>Description</strong>, ce sera une phrase.</p>
<p>Il est important que la phrase ne dépasse pas le 250 caractères, car le type <strong>SQL</strong> est <strong>VARCHAR(250)</strong>.</p>
<p>Une autre particularité est que le champ peut être <strong><code>null</code></strong> dans la base de données. Il faut que le générateur en tienne compte pour avoir une variabilité dans les données.</p>
<p>La méthode <strong><code>OrNull(f, [probabilite])</code></strong> permet d&#x27;indiquer la probabilité d&#x27;obtenir une valeur nulle. Il faut envoyer dans la méthode le <strong>Faker</strong> de la méthode.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private string? GenDescription(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //La méthode Sentence permet de générer une phrase de quelques mots.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Le type est VARCHAR(250)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//La probabilité du null est de 20%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return f.Lorem.Sentence().Tronquer(250).OrNull(f, 0.2f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test">Test<a href="#test" class="hash-link" aria-label="Direct link to Test" title="Direct link to Test">​</a></h2>
<p>Modifiez le fichier <strong>Program.cs</strong> pour ceci.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data.Context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using (GestionLivreContext db = new GestionLivreContext())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CollectionGenerateur generateur = new CollectionGenerateur();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(int i = 0; i &lt; 10; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Collection collection = generateur.Generer();        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;NomCollection : {collection.NomCollection}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Description : {collection.Description}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ajoute dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.Add(collection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Enregistre dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.SaveChanges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Exécutez le programme.</p>
<p>Voici un exemple de génération.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : Checking Account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : In aliquam quasi quisquam molestiae.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : Ouguiya Garden Savings Account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : Ab dolor non ullam hic sunt sit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : Mountain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : payment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : capability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : Repellat quas qui omnis rerum.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : Wooden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : SAS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : Non ipsum iure autem corporis.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : dynamic Global navigate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : Suscipit consequatur delectus.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : Indonesia productivity California</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : Laudantium architecto sit deserunt necessitatibus quae.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NomCollection : white</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description : Sapiente quo magni repellendus natus qui voluptates.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Des mots aux hasards et des phrases en <strong>Lorem</strong>, ce n&#x27;est peut-être pas le plus <strong>réaliste</strong>, mais ça permet d&#x27;avoir des données <strong>vraisemblables</strong> pour la base de données.</p>
<p>Ouvrez <strong>SSMS</strong> et effectuez la requête ci-dessous pour voir les données.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Collection</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Table Editeur</h1>
<p>La table <strong>Editeur</strong> consiste aux éditeurs de livres.</p>
<p>La table possède 3 champs.</p>
<ul>
<li>
<p><strong>Nom</strong></p>
<p>Le meilleur générateur pour le nom d&#x27;une collection serait un générateur de nom de compagnie dans le module <strong>Company</strong>.</p>
</li>
<li>
<p><strong>SiteWeb</strong></p>
<p>Le meilleur générateur pour le site web serait un générateur de Url dans le module <strong>Internet</strong>.</p>
</li>
<li>
<p><strong>Telephone</strong></p>
<p>Le meilleur générateur pour le téléphone serait un générateur de téléphone dans le module <strong>Phone</strong>.</p>
</li>
</ul>
<p>Créez la classe <strong>EditeurGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EditeurGenerateur : Faker&lt;Editeur&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public EditeurGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.Nom, GenNom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.SiteWeb, GenSiteWeb);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.Telephone, GenTelephone);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public Editeur Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenNom(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La méthode CompanyName permet de générer un nom de compagnie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Le type est VARCHAR(150)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Company.CompanyName().Tronquer(150)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenSiteWeb(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La méthode Url permet de générer une adresse internet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Le type est VARCHAR(3000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Internet.Url().Tronquer(3000)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenTelephone(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La méthode PhoneNumber peut avoir un format en paramètre.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Phone.PhoneNumber(&quot;###-###-####&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La plupart des méthodes ont la possibilité de mettre des paramètres.</p>
<p>Par exemple, <strong><code>CompanyName()</code></strong> peut avoir 3 formats différents. Si aucun paramètre n&#x27;est spécifié, les 3 formats de nom de compagnie seront utilisés.</p>
<p>Pour le téléphone, il aurait été possible d&#x27;utiliser le format <strong>(###) ###-####</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-1">Test<a href="#test-1" class="hash-link" aria-label="Direct link to Test" title="Direct link to Test">​</a></h2>
<p>Modifiez le fichier <strong>Program.cs</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data.Context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using (GestionLivreContext db = new GestionLivreContext())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EditeurGenerateur generateur = new EditeurGenerateur();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(int i = 0; i &lt; 10; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Editeur editeur = generateur.Generer();        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Nom : {editeur.Nom}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Site Web : {editeur.SiteWeb}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Téléphone : {editeur.Telephone}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ajoute dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.Add(editeur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Enregistre dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.SaveChanges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voici un exemple de données générées.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Langosh and Sons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : http://milton.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 730-694-1027</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Boyle, Osinski and Nikolaus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://mayra.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 453-503-9297</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Muller, Green and Harvey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://erin.info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 464-434-7270</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Farrell, Ortiz and Kiehn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://savanna.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 997-180-1888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Cronin, Kovacek and Stoltenberg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://maverick.info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 388-588-0080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Mohr - Krajcik</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : http://joesph.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 161-910-4126</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Kris - Gleichner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://ramona.info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 006-236-8048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Homenick LLC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : http://kirsten.biz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 445-092-6921</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : O&#x27;Reiley Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : http://connor.biz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 159-528-4460</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Paucek - Abernathy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://kaley.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 133-806-2671</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="amélioration---utilisation-dune-propriété-de-référence">Amélioration - Utilisation d&#x27;une propriété de référence<a href="#amélioration---utilisation-dune-propriété-de-référence" class="hash-link" aria-label="Direct link to Amélioration - Utilisation d&#x27;une propriété de référence" title="Direct link to Amélioration - Utilisation d&#x27;une propriété de référence">​</a></h2>
<p>Le site web n&#x27;a aucun lien avec le nom de la compagnie. Il serait intéressant que le nom de la compagnie soit dans le <strong>Url</strong>.</p>
<p>Il y a 3 options.</p>
<p>1- On transforme le nom de la compagnie pour le mettre en domaine.</p>
<p>Il faut s&#x27;assurer d&#x27;éliminer tous les caractères problématiques.</p>
<p>Dans l&#x27;exemple ci-dessus, il y a : <strong><code>, &#x27; -</code></strong> et l&#x27;espace.</p>
<p>2- On génère une adresse internet et la portion domaine devient le nom de la compagnie.</p>
<p>3- On génère le nom de la compagnie à partir de mots de domaine.</p>
<p>Le module <strong>Internet</strong> permet de générer des mots de domaine. Il serait ensuite possible d&#x27;appliquer l&#x27;option 1 à partir de ces mots sans se soucier d&#x27;éliminer les caractères.</p>
<p>Les 3 approches dépendent d&#x27;une autre propriété pour se générer.</p>
<p>Pour cet exemple, l&#x27;option 3 sera utilisée.</p>
<p>L&#x27;ordre des <strong><code>RuleFor</code></strong> est important dans ce cas-ci, car il faut générer le nom de la compagnie avant le domaine.</p>
<p>Voici la nouvelle méthode <strong><code>GenNom()</code></strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private string GenNom(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Le nombre de mots sera aléatoire (entre 1 et 4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Il faut mettre la première lettre du nom en majuscule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	int nbMot = f.Random.Number(1, 4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	string[] mots = new string[nbMot];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	for(int i = 0; i &lt; nbMot; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		mots[i] = f.Internet.DomainWord();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}						</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	string nom = string.Join(&quot; &quot;, mots);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Le type est VARCHAR(150)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	return (nom.Substring(0, 1).ToUpper() + nom.Substring(1)).Tronquer(150)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voici la nouvelle méthode <strong><code>GenSiteWeb()</code></strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private string GenSiteWeb(Faker f, Editeur editeur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Le type est VARCHAR(3000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Les espaces du nom de l&#x27;éditeur peuvent être éliminés ou remplacés par des tirets.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Il est possible de données des choix et de choisir en fonction d&#x27;une probabilité.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//Il est important que les 2 tableaux soient de la même longueur.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	string[] choixRemplacement = { string.Empty, &quot;-&quot; };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//La somme des probabilités doit être 1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//60% de retirer l&#x27;espace et 40% de mettre un tiret.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	float[] probabiliteRemplacement = { 0.6f, 0.4f };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //La méthode WeightedRandom permet de faire un choix dans une liste en fonction de probabilité pour chacun des items.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	string valeurRemplacement = f.Random.WeightedRandom(choixRemplacement, probabiliteRemplacement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //La longueur maximale d&#x27;un domaine est de 63</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	string domaine = editeur.Nom.ToLower().Replace(&quot; &quot;, valeurRemplacement).Tronquer(63)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Ajoute à la fin un suffixe de domaine.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (&quot;https://www.&quot; + domaine + &quot;.&quot; + f.Internet.DomainSuffix()).Tronquer(3000)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Premièrement, la méthode a un 2e paramètre. Il s&#x27;agit de l&#x27;instance <strong>Editeur</strong> en cours de création.</p>
<p>Ensuite, il est possible de remplacer les espaces du nom par des tirets ou de les retirer. Afin de varier le plus possible le domaine, l&#x27;utilisation de la méthode <strong><code>WeightedRandom()</code></strong> permet de mettre une probabilité sur chaque possibilité.  Il y a donc 60% plus de chance de retirer l&#x27;espace.</p>
<p>Finalement, la méthode <strong><code>DomainSuffix()</code></strong> permet de générer un <strong>.xyz</strong> valide.</p>
<p>Voici le code complet de la classe <strong>EditeurGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EditeurGenerateur : Faker&lt;Editeur&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public EditeurGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.Nom, GenNom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.SiteWeb, GenSiteWeb);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.Telephone, GenTelephone);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public Editeur Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenNom(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Le nombre de mots sera aléatoire (entre 1 et 4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Il faut mettre la première lettre du nom en majuscule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		int nbMot = f.Random.Number(1, 4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		string[] mots = new string[nbMot];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		for(int i = 0; i &lt; nbMot; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			mots[i] = f.Internet.DomainWord();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}						</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		string nom = string.Join(&quot; &quot;, mots);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Le type est VARCHAR(150)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return (nom.Substring(0, 1).ToUpper() + nom.Substring(1)).Tronquer(150)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenSiteWeb(Faker f, Editeur editeur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Le type est VARCHAR(3000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Les espaces du nom de l&#x27;éditeur peuvent être éliminés ou remplacés par des tirets.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Il est possible de données des choix et de choisir en fonction d&#x27;une probabilité.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Il est important que les 2 tableaux soient de la même longueur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		string[] choixRemplacement = { string.Empty, &quot;-&quot; };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La somme des probabilités doit être 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//60% de retirer l&#x27;espace et 40% de mettre un tiret.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		float[] probabiliteRemplacement = { 0.6f, 0.4f };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //La méthode WeightedRandom permet de faire un choix dans une liste en fonction de probabilité pour chacun des items.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string valeurRemplacement = f.Random.WeightedRandom(choixRemplacement, probabiliteRemplacement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La longueur maximale d&#x27;un domaine est de 63</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		string domaine = editeur.Nom.ToLower().Replace(&quot; &quot;, valeurRemplacement).Tronquer(63)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ajoute à la fin un suffixe de domaine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (&quot;https://www.&quot; + domaine + &quot;.&quot; + f.Internet.DomainSuffix()).Tronquer(3000)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenTelephone(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//La méthode PhoneNumber peut avoir un format en paramètre.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Phone.PhoneNumber(&quot;###-###-####&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voici un exemple de génération.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Graciela</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://www.graciela.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 126-633-0627</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Nola eden buck elnora</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://www.nola-eden-buck-elnora.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 170-125-8822</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Helen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://www.helen.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 008-494-5413</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Torrance earl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://www.torranceearl.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 340-024-2604</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Pearl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://www.pearl.info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 336-317-2160</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Thelma delores cassidy randal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Site Web : https://www.thelmadelorescassidyrandal.biz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Téléphone : 892-446-1812</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Pour le TP2</strong>, vous devez générer un courriel pour le développeur. Habituellement, le courriel a un lien avec le nom du domaine.</p>
<p>Dans le projet <strong>GestionPersonnageApp</strong>, le site web est généré autrement.</p>
<h1>Table Auteur</h1>
<p>La table <strong>Auteur</strong> contient l&#x27;information d&#x27;un auteur d&#x27;un livre.</p>
<p>La table possède 5 champs.</p>
<ul>
<li>
<p><strong>Nom</strong> et <strong>Prenom</strong></p>
<p>Le module <strong>Name</strong> a des générateurs de noms de personne.</p>
</li>
<li>
<p><strong>Biographie</strong></p>
<p>Le module <strong>Lorem</strong> peut générer des paragraphes.</p>
</li>
<li>
<p><strong>DateNaissance</strong> et <strong>DateDeces</strong></p>
<p>Le module <strong>Date</strong> peut générer des dates.</p>
<p>La génération de la date de décès dépend de la date de naissance.</p>
<p>Il faut s&#x27;assurer que la date de décès est plus récente que la date de naissance.</p>
<p>Il ne peut avoir aucune date dans le futur.</p>
<p>Il faudrait également s&#x27;assurer que si l&#x27;auteur est toujours en vie, que son âge soit vraisemblable.</p>
<p>Si l&#x27;auteur est décédé, il faut que son âge soit vraisemblable également.</p>
</li>
</ul>
<p>Créez la classe <strong>AuteurGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AuteurGenerateur : Faker&lt;Auteur&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public AuteurGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Prenom, GenPrenom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Nom, GenNom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Biographie, GenBiographie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.DateNaissance, GenDateNaissance);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.DateDeces, GenDateDeces);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Auteur Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenPrenom(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Name.FirstName().Tronquer(50)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenNom(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Name.LastName().Tronquer(50)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string? GenBiographie(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(5000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //30% d&#x27;obtenir un null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Lorem.Paragraphs(1, 3).OrNull(f, 0.3f).Tronquer(5000)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DateTime GenDateNaissance(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //La date peut être entre 1800-01-01 et 15 ans dans le passé.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Retourne la portion date seulement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Date.Between(new DateTime(1800, 1, 1), DateTime.Now.AddYears(-15)).Date;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DateTime? GenDateDeces(Faker f, Auteur auteur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Vérifie si la date de naissance est il y a plus de 95 ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(DateTime.Now.Date.Year - auteur.DateNaissance.Year &gt; 95)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //La date de naissance est il y a plus de 95 ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Il faut obligatoirement générer ne date de décès.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //L&#x27;auteur peut être mort entre 15 et 95 ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return f.Date.Between(auteur.DateNaissance.AddYears(15), auteur.DateNaissance.AddYears(95)).Date;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //La date de naissance est il y a 95 ans et moins.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Il y a seulement 5% de chance qu&#x27;il soit décédé.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return f.Date.Between(auteur.DateNaissance.AddYears(15), DateTime.Now.AddDays(-5)).Date.OrNull(f, 0.95f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voici la méthode <strong><code>GenDateNaissance()</code></strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private DateTime GenDateNaissance(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //La date peut être entre 1800-01-01 et 15 ans dans le passé.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Retourne la portion date seulement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return f.Date.Between(new DateTime(1800, 1, 1), DateTime.Now.AddYears(-15)).Date;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Le générateur ne peut pas générer des auteurs de moins de 15 ans.</p>
<p>Il serait possible d&#x27;optimiser les auteurs récents en ajoutant beaucoup plus de logique. Il faut toujours se demander si les ajouts de logiques ont réellement de la valeur. Dans ce cas-ci, il n&#x27;est pas nécessaire d&#x27;optimiser les auteurs récents.</p>
<p>Voici la méthode <strong><code>GenDateDeces()</code></strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private DateTime? GenDateDeces(Faker f, Auteur auteur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Vérifie si la date de naissance est il y a plus de 95 ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(DateTime.Now.Date.Year - auteur.DateNaissance.Year &gt; 95)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //La date de naissance est il y a plus de 95 ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Il faut obligatoirement générer ne date de décès.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //L&#x27;auteur peut être mort entre 15 et 95 ans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Date.Between(auteur.DateNaissance.AddYears(15), auteur.DateNaissance.AddYears(95)).Date;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //La date de naissance est il y a 95 ans et moins.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Il y a seulement 5% de chance qu&#x27;il soit décédé.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Date.Between(auteur.DateNaissance.AddYears(14), DateTime.Now.AddDays(-5)).Date.OrNull(f, 0.95f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pour la date de décès, il est plus pertinent d&#x27;avoir plus de logique. Il est impossible d&#x27;avoir un auteur de 200 ans. Il faut avoir des dates de décès réaliste en fonction de la date de naissance. Pour cet outil, tous les auteurs qui ont plus de 95 ans doivent avoir une date de décès. Il faut également que l&#x27;auteur ait vécu un nombre d&#x27;années minimal. L&#x27;âge minimal est 15 ans.</p>
<p>Dans le cas que l&#x27;auteur a moins de 95 ans, il y a 5% de chance qu&#x27;il soit décédé. Il doit avoir au moins 14 ans à la date de son décès.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-2">Test<a href="#test-2" class="hash-link" aria-label="Direct link to Test" title="Direct link to Test">​</a></h2>
<p>Modifiez le fichier <strong>Program.cs</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data.Context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using (GestionLivreContext db = new GestionLivreContext())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AuteurGenerateur generateur = new AuteurGenerateur();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(int i = 0; i &lt; 1000; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Auteur auteur = generateur.Generer();        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Prenom : {auteur.Prenom}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Nom : {auteur.Nom}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Date naissance : {auteur.DateNaissance}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Date décès : {auteur.DateDeces}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Biographie : {auteur.Biographie}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ajoute dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.Add(auteur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Enregistre dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.SaveChanges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voici un exemple.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prenom : Darryl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Satterfield</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date naissance : 1938-09-16 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date décès :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Biographie : Magni inventore est sequi cum suscipit omnis autem debitis perspiciatis. Non cumque enim modi nulla et. Quisquam quos sequi vel.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Quisquam neque sed quidem. Voluptas asperiores blanditiis ratione exercitationem rerum sit fuga. Voluptatem quia voluptas fuga harum aut alias quod et. Et laboriosam delectus odit est eligendi itaque dolore.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Eos quidem minima enim. A et et sit sapiente dolor reiciendis et qui sit. Corporis animi voluptatem quia sequi nihil qui eum ipsa perferendis.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prenom : Linnea</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Herzog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date naissance : 1950-08-30 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date décès : 2022-05-08 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Biographie : Qui molestiae aliquid qui dolores praesentium. Corporis repellendus iste quis. Voluptas sequi omnis illo in architecto deleniti voluptates dolor. Ut cupiditate sed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prenom : Arnulfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nom : Ruecker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date naissance : 1826-04-24 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date décès : 1865-05-10 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Biographie :</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Table Livre</h1>
<p>La table <strong>Livre</strong> contient l&#x27;information d&#x27;un livre.</p>
<p>La table a 2 clés étrangères. Il est important de ne pas pendre des nombres au hasard, mais des clés étrangères qui existent réellement dans la base de données. Si la clé étrangère n&#x27;existe pas, l&#x27;enregistrement sera refusé dans la base de données.</p>
<p>Créez la classe <strong>LivreGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LivreGenerateur : Faker&lt;Livre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;int&gt; _lstCollectionId= new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;int&gt; _lstEditeurId = new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LivreGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Titre, GenTitre);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Resume, GenResume);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.DatePublication, GenDatePublication);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Prix, GenPrix);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.NbPage, GenNbPage);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Categorie, GenCategorie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.CollectionId, GenCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.EditeurId, GenEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Livre Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void AssignerListeCollectionId(List&lt;int&gt; lstCollectionId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstCollectionId.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstCollectionId.AddRange(lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void AssignerListeEditeurId(List&lt;int&gt; lstEditeurId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstEditeurId.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstEditeurId.AddRange(lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenTitre(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère une série de mots</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Random.Words().Tronquer(100)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenResume(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère entre 1 et 4 paragraphes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(5000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Lorem.Paragraphs(1, 4).Tronquer(5000)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DateTime GenDatePublication(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Retourne une date dans les 25 dernières années</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Date.Past(25).Date;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private decimal GenPrix(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //DECIMAL(5,2) =&gt; 0.00 et 999.99</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Finance.Amount(0, 999.99m);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private short GenNbPage(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère entre 20 et 5123 pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //TINYINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Random.Short(20, 5123);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenCategorie(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //La liste des valeurs possibles dans la contrainte CHECK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string[] categories = { &quot;Jeunesse&quot;, &quot;Biographie&quot;, &quot;Policier&quot; };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Selectionne une valeur dans la liste</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.PickRandom(categories);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int GenCollectionId(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Sélectionne un EditeurId dans la liste des CollectionId disponibles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.PickRandom(_lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int GenEditeurId(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Sélectionne un EditeurId dans la liste des EditeurId disponibles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.PickRandom(_lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La classe a 2 attributs pour contenir les listes des clés étrangères.</p>
<p>Elle a également les 2 méthodes d&#x27;assignation des dépendances.</p>
<p>Avant de débuter une génération, il est important que ces listes soient assignées. Toutes les tables qui utilisent des clés étrangères doivent avoir cette approche.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/***/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private List&lt;int&gt; _lstCollectionId= new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private List&lt;int&gt; _lstEditeurId = new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/***/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void AssignerListeCollectionId(List&lt;int&gt; lstCollectionId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _lstCollectionId.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _lstCollectionId.AddRange(lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void AssignerListeEditeurId(List&lt;int&gt; lstEditeurId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _lstEditeurId.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _lstEditeurId.AddRange(lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les méthodes <strong><code>GenCollectionId()</code></strong> et <strong><code>GenEditeurId()</code></strong> utilisent la fonctionnalité <strong><code>PickRandom()</code></strong> de <strong>Bogus</strong>. Cette fonctionnalité permet de choisir au hasard un item dans un tableau ou une collection.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private int GenCollectionId(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Sélectionne un EditeurId dans la liste des CollectionId disponibles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return f.PickRandom(_lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private int GenEditeurId(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Sélectionne un EditeurId dans la liste des EditeurId disponibles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return f.PickRandom(_lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Une autre particularité pour ce générateur est pour le champ <strong>Categorie</strong>. Ce champ a une contrainte <strong>CHECK</strong> et permet seulement 3 valeurs.</p>
<p>Les 3 valeurs de la contrainte <strong>CHECK</strong> sont dans l&#x27;attribut <strong>_categories</strong> de la classe.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//La liste des valeurs possibles de la contrainte CK_Livre_Categorie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private string[] _categories = { &quot;Jeunesse&quot;, &quot;Biographie&quot;, &quot;Policier&quot; };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/***/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private string GenCategorie(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Selectionne une valeur dans la liste</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return f.PickRandom(categories);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pour la propriété <strong>Prix</strong>, le module <strong>Finance</strong> est utilisé. Elle permet de générer des montants avec 2 décimales.</p>
<p>Il est important de respecter la précision du <strong>DECIMAL SQL</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private decimal GenPrix(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //DECIMAL(5,2) =&gt; 0.00 et 999.99</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return f.Finance.Amount(0, 999.99m);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pour la propriété <strong>DatePublication</strong>, la méthode <strong><code>Past()</code></strong> du module <strong>Date</strong> permet de générer une date dans le passée.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private DateTime GenDatePublication(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Retourne une date dans les 25 dernières année</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return f.Date.Past(25).Date;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les autres méthodes de génération utilisent des concepts similaires des autres tables.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-3">Test<a href="#test-3" class="hash-link" aria-label="Direct link to Test" title="Direct link to Test">​</a></h2>
<p>Modifiez le fichier <strong>Program.cs</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data.Context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using (GestionLivreContext db = new GestionLivreContext())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LivreGenerateur generateur = new LivreGenerateur();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Obtenir la liste des clés EditeurId dans la base de de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;int&gt; lstEditeurId = db.Editeur.Select(e =&gt; e.EditeurId).ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Obtenir la liste des clés CollectionId dans la base de de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;int&gt; lstCollectionId = db.Collection.Select(c =&gt; c.CollectionId).ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Assigner la liste dans le générateur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generateur.AssignerListeEditeurId(lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Assigner la liste dans le générateur    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generateur.AssignerListeCollectionId(lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int i = 0; i &lt; 5; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Livre livre = generateur.Generer();        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Titre : {livre.Titre}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Résumé : {livre.Resume}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Date publication : {livre.DatePublication}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Prix : {livre.Prix}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Nombre de pages : {livre.NbPage}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Catégories : {livre.Categorie}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;CollectionId : {livre.CollectionId}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;EditeurId : {livre.EditeurId}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ajoute dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.Add(livre);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Enregistre dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.SaveChanges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les lignes 10 et 12 récupèrent de la base de données toutes les clés disponibles pour chacune des tables parents.</p>
<p>Les lignes 15 et 17 permettent d&#x27;ajouter les clés étrangères dans le générateur.</p>
<p>Voici un exemple.</p>
<p>Les prix sont assez élevés. Il serait plus réaliste de réduire la plage à moins de 50$, même si la base de données permet jusqu&#x27;à 999.99.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Titre : Mobility</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Résumé : Sunt dolor corrupti hic. Et ipsa a omnis consequatur. Ipsa tempore officia quod voluptatem et laborum incidunt deleniti. Voluptatem consequatur quis doloremque nobis corporis maiores suscipit optio non. Ducimus consequatur debitis.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date publication : 2000-07-17 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prix : 795,39</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nombre de pages : 3378</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Catégories : Jeunesse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionId : 11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EditeurId : 14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Titre : USB Money Market Account installation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Résumé : Ut aut repudiandae placeat voluptatem fugiat eum. Nesciunt eveniet itaque nihil non quas neque natus qui deserunt. Officiis magnam et ut quaerat sunt sequi. Reprehenderit ad nemo possimus deserunt vitae consequatur aliquam. Veniam aut fugiat at eum quis corporis. Culpa nam laboriosam culpa quam eveniet quam quia autem voluptatum.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Vel deleniti et nesciunt eos et placeat repudiandae praesentium deleniti. Aut temporibus qui consequatur porro. Commodi sed itaque nesciunt est et doloribus at reprehenderit itaque. Totam reprehenderit et. Ut sint est rerum consequuntur id est totam. Debitis ut quasi.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mollitia veritatis aut perferendis id aut sed nisi. Nostrum minus voluptatem. Deleniti enim voluptas sed recusandae enim ut nihil omnis iusto. Quod reiciendis dolorem ipsum. Beatae dolorum eius illum.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Fugiat sed et voluptatem nulla adipisci. Aut sed reiciendis modi voluptatum est enim. Autem et quo.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date publication : 2016-12-03 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prix : 946,61</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nombre de pages : 562</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Catégories : Jeunesse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionId : 19</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EditeurId : 13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Titre : Handcrafted Wooden Tasty Metal Table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Résumé : Suscipit fugiat est beatae. Perferendis aut quas iste. Porro dolores qui consectetur alias sint laboriosam voluptatem voluptates. Nihil quis explicabo rerum aut et provident delectus ad. Adipisci velit sint et quidem quibusdam necessitatibus odit praesentium quo.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date publication : 2004-04-08 00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prix : 707,16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nombre de pages : 1652</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Catégories : Jeunesse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionId : 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EditeurId : 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>La table LivreAuteur</h1>
<p>La table <strong>LivreAuteur</strong> est une table pivot. Elle permet d&#x27;indiquer les auteurs d&#x27;un livre.</p>
<p>Au niveau du <strong>contexte</strong>, il n&#x27;y a pas de classe, car il s&#x27;agit d&#x27;une table pivot <strong>&quot;pure&quot;</strong>.</p>
<p>Pour être en mesure de créer des enregistrements dans une table pivot <strong>&quot;pure&quot;</strong>, il faut l&#x27;ajouter à partir d&#x27;une des tables parents.</p>
<p>Donc, pour <strong>LivreAuteur</strong>, ce sont les classes <strong>Livre</strong> et <strong>Auteur</strong>.</p>
<p>Dans la classe <strong>Livre</strong>, il y a une collection de type <strong>Auteur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public virtual ICollection&lt;Auteur&gt; Auteur { get; } = new List&lt;Auteur&gt;();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans la classe <strong>Auteur</strong>, il y a une collection de type <strong>Livre</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public virtual ICollection&lt;Livre&gt; Livre { get; } = new List&lt;Livre&gt;();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans la classe <strong>GestionLivreContext</strong>,  dans la méthode <strong><code>OnModelCreating()</code></strong>, il y a l&#x27;explication de la table <strong>LivreAuteur</strong>.</p>
<p>Il n&#x27;est pas nécessaire de comprendre à cette étape la relation, mais <strong>Entity</strong> est en mesure de créer les enregistrements dans la table <strong>LivreAuteur</strong> à partir des propriétés de navigation.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">modelBuilder.Entity&lt;Livre&gt;(entity =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /***/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entity.HasMany(d =&gt; d.Auteur).WithMany(p =&gt; p.Livre)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .UsingEntity&lt;Dictionary&lt;string, object&gt;&gt;(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;LivreAuteur&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            r =&gt; r.HasOne&lt;Auteur&gt;().WithMany()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .HasForeignKey(&quot;AuteurId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .OnDelete(DeleteBehavior.ClientSetNull)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .HasConstraintName(&quot;FK_LivreAuteur_AuteurId&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            l =&gt; l.HasOne&lt;Livre&gt;().WithMany()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .HasForeignKey(&quot;LivreId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .OnDelete(DeleteBehavior.ClientSetNull)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .HasConstraintName(&quot;FK_LivreAuteur_LivreId&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            j =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                j.HasKey(&quot;LivreId&quot;, &quot;AuteurId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Donc pour générer des données, il faut le faire à partir des générateurs  <strong>AuteurGenerateur</strong> ou <strong>LivreGenerateur</strong>.</p>
<p>Pour cet exemple, le générateur <strong>LivreGenerateur</strong> sera utilisé.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="modification-de-livregenerateur">Modification de LivreGenerateur<a href="#modification-de-livregenerateur" class="hash-link" aria-label="Direct link to Modification de LivreGenerateur" title="Direct link to Modification de LivreGenerateur">​</a></h2>
<p>Voici la nouvelle classe <strong>LivreGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LivreGenerateur : Faker&lt;Livre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;int&gt; _lstCollectionId= new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;int&gt; _lstEditeurId = new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;Auteur&gt; _lstAuteur = new List&lt;Auteur&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //La liste des valeurs possibles de la contrainte CK_Livre_Categorie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string[] _categories = { &quot;Jeunesse&quot;, &quot;Biographie&quot;, &quot;Policier&quot; };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LivreGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Titre, GenTitre);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Resume, GenResume);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.DatePublication, GenDatePublication);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Prix, GenPrix);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.NbPage, GenNbPage);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Categorie, GenCategorie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.CollectionId, GenCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.EditeurId, GenEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Livre Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Livre livre =  base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GenAuteurs(livre);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return livre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void AssignerListeCollectionId(List&lt;int&gt; lstCollectionId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstCollectionId.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstCollectionId.AddRange(lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void AssignerListeEditeurId(List&lt;int&gt; lstEditeurId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstEditeurId.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstEditeurId.AddRange(lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void AssignerListeAuteur(List&lt;Auteur&gt; lstAuteur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ce n&#x27;est pas des Id, mais une liste des enregistrements Auteur.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstAuteur.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstAuteur.AddRange(lstAuteur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenTitre(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère une série de mots</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Random.Words().Tronquer(100)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenResume(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère entre 1 et 4 paragraphes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(5000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Lorem.Paragraphs(1, 4).Tronquer(5000)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DateTime GenDatePublication(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Retourne une date dans les 25 dernières années</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Date.Past(25).Date;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private decimal GenPrix(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //DECIMAL(5,2) =&gt; 0.00 et 999.99</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Finance.Amount(0, 999.99m);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private short GenNbPage(Faker f) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère entre 20 et 5123 pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //TINYINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Random.Short(20, 5123);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GenCategorie(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Selectionne une valeur dans la liste</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.PickRandom(_categories);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int GenCollectionId(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Sélectionne un EditeurId dans la liste des CollectionId disponibles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.PickRandom(_lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int GenEditeurId(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Sélectionne un EditeurId dans la liste des EditeurId disponibles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.PickRandom(_lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void GenAuteurs(Livre livre)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Vérifie si la liste d&#x27;auteur n&#x27;est pas vide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (_lstAuteur.Count &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //La liste d&#x27;auteur n&#x27;est pas vide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Créer un Faker pour avoir un générateur de nombre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Faker f = new Faker();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Permet de choisir entre 1 et 3 auteurs. S&#x27;il y a moins que 3 auteurs, le nombre maximum sera le nombre d&#x27;auteurs.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int nbAuteur = f.Random.Number(1, Math.Min(_lstAuteur.Count, 3));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Le code ci-dessous permet de s&#x27;assurer que le même auteur n&#x27;est pas pigé plusieurs fois.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Auteur auteurSelectionne = f.PickRandom(_lstAuteur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (livre.Auteur.Contains(auteurSelectionne) == false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //L&#x27;auteur sélectionné est un nouvel auteur                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    livre.Auteur.Add(auteurSelectionne);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    nbAuteur--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } while (nbAuteur &gt; 0);            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Il y a maintenant un attribut <strong><code>List&lt;Auteur&gt; _lstAuteur</code></strong> qui contient les auteurs disponibles et sa méthode d&#x27;assignation.</p>
<p>Dans ce cas, il est important que ce soit l&#x27;objet <strong>Auteur</strong> et non seulement les <strong>Id</strong>, car <strong>Entity Framework</strong> ne peut pas ajouter directement des enregistrements à partir de la clé, mais à partir de l&#x27;objet.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private List&lt;Auteur&gt; _lstAuteur = new List&lt;Auteur&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/***/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void AssignerListeAuteur(List&lt;Auteur&gt; lstAuteur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Ce n&#x27;est pas des Id, mais une liste des enregistrements Auteur.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _lstAuteur.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _lstAuteur.AddRange(lstAuteur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Entuite, il y a la méthode <strong><code>GenAuteurs()</code></strong> qui permet de choisir la liste des auteurs de ce livre.</p>
<p>La méthode reçoit en paramètre l&#x27;objet <strong>Livre</strong> en cours de génération.</p>
<p>À la ligne 11, le nombre d&#x27;auteurs pour ce livre est choisi au hasard. Il serait intéressant de favoriser 1 auteur seulement par rapport à 2 ou 3. Mais pour simplifier, chaque nombre aura la même probabilité.</p>
<p>Il y a une protection pour éviter de sélectionner 2 fois le même auteur. La méthode <strong><code>PickRandom()</code></strong> peut choisir le même élément plus d&#x27;une fois. Entre les lignes 14 et 25, c&#x27;est la boucle de sélection. La vérification se fait à la ligne 18.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private void GenAuteurs(Livre livre)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Vérifie si la liste d&#x27;auteur n&#x27;est pas vide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (_lstAuteur.Count &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //La liste d&#x27;auteur n&#x27;est pas vide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Créer un Faker pour avoir un générateur de nombre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Faker f = new Faker();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Permet de choisir entre 1 et 3 auteurs. S&#x27;il y a moins que 3 auteurs, le nombre maximum sera le nombre d&#x27;auteurs.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int nbAuteur = f.Random.Number(1, Math.Min(_lstAuteur.Count, 3));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Le code ci-dessous permet de s&#x27;assurer que le même auteur n&#x27;est pas pigé plusieurs fois.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Auteur auteurSelectionne = f.PickRandom(_lstAuteur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (livre.Auteur.Contains(auteurSelectionne) == false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //L&#x27;auteur sélectionné est un nouvel auteur                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                livre.Auteur.Add(auteurSelectionne);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                nbAuteur--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } while (nbAuteur &gt; 0);            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La méthode <strong><code>Generer()</code></strong> est modifiée. Il n&#x27;est pas possible de mettre dans le constructeur une règle <strong><code>RuleFor</code></strong> pour l&#x27;ajout dans une collection. La méthode <strong><code>RuleFor</code></strong> permet de faire des assignations uniquement.</p>
<p>Il faut donc générer un objet <strong>Livre</strong> et ensuite ajouter les auteurs avant de le retourner.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public Livre Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Génère un livre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Livre livre =  base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Assigne des auteurs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GenAuteurs(livre);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Retourne l&#x27;objet livre complet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return livre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-4">Test<a href="#test-4" class="hash-link" aria-label="Direct link to Test" title="Direct link to Test">​</a></h2>
<p>Modifiez le fichier <strong>Program.cs</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data.Context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using (GestionLivreContext db = new GestionLivreContext())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LivreGenerateur generateur = new LivreGenerateur();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Obtenir la liste des clés EditeurId dans la base de de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;int&gt; lstEditeurId = db.Editeur.Select(e =&gt; e.EditeurId).ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Assigner la liste dans le générateur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generateur.AssignerListeEditeurId(lstEditeurId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Obtenir la liste des clés CollectionId dans la base de de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;int&gt; lstCollectionId = db.Collection.Select(c =&gt; c.CollectionId).ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Assigner la liste dans le générateur    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generateur.AssignerListeCollectionId(lstCollectionId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Obtenir la liste des auteurs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Auteur&gt; lstAuteur = db.Auteur.ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Assigner la liste dans le générateur    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generateur.AssignerListeAuteur(lstAuteur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int i = 0; i &lt; 5; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Livre livre = generateur.Generer();        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Titre : {livre.Titre}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Résumé : {livre.Resume}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Date publication : {livre.DatePublication}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Prix : {livre.Prix}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Nombre de pages : {livre.NbPage}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Catégories : {livre.Categorie}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;CollectionId : {livre.CollectionId}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;EditeurId : {livre.EditeurId}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ajoute dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.Add(livre);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Enregistre dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.SaveChanges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans <strong>SSMS</strong>, effectuez cette requête. Vous devriez voir des enregistrements.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> LivreAuteur</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pour-le-tp2">Pour le TP2<a href="#pour-le-tp2" class="hash-link" aria-label="Direct link to Pour le TP2" title="Direct link to Pour le TP2">​</a></h2>
<p>La table <strong>ApplicationLangue</strong> est une table pivot <strong>&quot;pure&quot;</strong>. Elle doit utiliser cette approche. Le générateur de la table <strong>Application</strong> devra générer les données de <strong>ApplicationLangue</strong>.</p>
<p>Le générateur peut générer des livres après la mort d&#x27;un auteur. Ce n&#x27;est pas très logique. Il serait possible de régler ce problème, mais le générateur serait un peu plus complexe. Il faudrait faire de la vérification intertable. Il ne sera pas nécessaire de faire une vérification intertable pour le <strong>TP 2</strong>.</p>
<p>Il n&#x27;y a pas de table pivot <strong>&quot;pure&quot;</strong> dans le projet <strong>GestionPersonnageApp</strong>.</p>
<h1>Table Magasin et Inventaire</h1>
<p>La table <strong>Inventaire</strong> est une table pivot entre <strong>Magasin</strong> et <strong>Livre</strong>, mais elle a une propriété <strong>Quantite</strong>.</p>
<p>La classe <strong>Inventaire</strong> existe dans le <strong>contexte</strong>.</p>
<p>Il serait possible de générer <strong>Inventaire</strong> en recevant la liste de <strong>MagasinId</strong> et de <strong>LivreId</strong>. Par contre, il serait possible que le couple <strong>MagasinId, LivreId</strong> soit généré au hasard plus d&#x27;une fois. Donc l&#x27;enregistrement serait refusé par la base de données.</p>
<p>Il faut donc générer <strong>Inventaire</strong> à partir de <strong>Magasin</strong> ou de <strong>Livre</strong>. Étant donné que <strong>Livre</strong> s&#x27;occupe des auteurs, ce sera <strong>Magasin</strong> qui s&#x27;en occupera pour cet exemple.</p>
<p>La table <strong>Inventaire</strong> a ses propres champs. Il faut donc créer une classe <strong>InventaireGenerateur</strong> également.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="magagingenerateur">MagaginGenerateur<a href="#magagingenerateur" class="hash-link" aria-label="Direct link to MagaginGenerateur" title="Direct link to MagaginGenerateur">​</a></h2>
<p>La table possède 4 champs.</p>
<ul>
<li>
<p><strong>Nom</strong></p>
<p>Le module <strong>Company</strong> permet de générer un nom de compagnie.</p>
</li>
<li>
<p><strong>Adresse</strong></p>
<p>Le module <strong>Adresse</strong> permet de générer une adresse pour une rue.</p>
</li>
<li>
<p><strong>Ville</strong></p>
<p>Le module <strong>Adresse</strong> permet de générer un nom de ville.</p>
</li>
<li>
<p><strong>CodePostal</strong></p>
<p>Le module <strong>Adresse</strong> permet de générer un code postal selon un format.</p>
</li>
</ul>
<p>Créez la classe <strong>MagasinGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MagasinGenerateur : Faker&lt;Magasin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public MagasinGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		RuleFor(i =&gt; i.Nom, GenNom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Adresse, GenAdresse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Ville, GenVille);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.CodePostal, GenPostalCode);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public Magasin Generer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenNom(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //VARCHAR(150)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Company.CompanyName().Tronquer(150)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenAdresse(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//VARCHAR(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Address.StreetAddress().Tronquer(100)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenVille(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//VARCAHR(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Address.City().Tronquer(100)!;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private string GenPostalCode(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//Format A0A 0A0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//? = Lettre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//# = Chiffre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return f.Address.ZipCode(&quot;?#? #?#&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inventairegenerateur">InventaireGenerateur<a href="#inventairegenerateur" class="hash-link" aria-label="Direct link to InventaireGenerateur" title="Direct link to InventaireGenerateur">​</a></h2>
<p>La table <strong>Inventaire</strong> possède 3 champs.</p>
<ul>
<li>
<p><strong>LivreId</strong></p>
<p>La clé étrangère sera sélectionnée à partir des clés qui auront été assignées au générateur.</p>
</li>
<li>
<p><strong>MagasinId</strong></p>
<p>La référence avec la table <strong>Magasin</strong> se fera par la propriété de navigation. Le générateur s&#x27;occupera de générer les inventaires pour un magasin.</p>
</li>
<li>
<p><strong>Quantite</strong></p>
<p>Un générateur de nombre permettra de créer une quantité.</p>
</li>
</ul>
<p>Créez la classe <strong>InventaireGenerateur</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Bogus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class InventaireGenerateur : Faker&lt;Inventaire&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private List&lt;int&gt; _lstLivreId = new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public InventaireGenerateur()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.Quantite, GenQuantite);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(i =&gt; i.LivreId, GenLivreId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Generer(Magasin magasin, int min, int max)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Faker f = new Faker();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Détermine le nombre d&#x27;inventaires à générer pour ce magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int nbInventaire = f.Random.Number(min, max);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Le code ci-dessous permet de s&#x27;assurer que le même LivreId n&#x27;est pas pigé plusieurs fois.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;int&gt; lstLivreIdUtilise = new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Inventaire inventaire = base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Vérifie s&#x27;il y a un inventaire pour ce magasin qui a déjà ce livre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (magasin.Inventaire.Count(i =&gt; i.LivreId == inventaire.LivreId) == 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //Le livre n&#x27;a jamais été utilisé pour un inventaire de ce magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //L&#x27;inventaire est ajouté à la base de données, en assignant le MagasinId du magasin en cours</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                magasin.Inventaire.Add(inventaire);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                nbInventaire--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } while (nbInventaire &gt; 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void AssignerListeLivreId(List&lt;int&gt; lstLivreId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstLivreId.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _lstLivreId.AddRange(lstLivreId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private short GenQuantite(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.Random.Short(0, 453);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int GenLivreId(Faker f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return f.PickRandom(_lstLivreId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>En gros, il s&#x27;agit d&#x27;un générateur comme les autres avec une assignation de dépendances.</p>
<p>Par contre, la méthode <strong><code>Generer()</code></strong> est différente.</p>
<p>La méthode reçoit en paramètre un <strong>Magasin</strong>, une quantité minimum et maximum à générer.</p>
<p>Les inventaires sont créés en sélectionnant un livre dans la liste des clés disponibles et en créant une quantité.</p>
<p>Avant d&#x27;ajouter l&#x27;inventaire à la liste des inventaires de ce magasin, il faut s&#x27;assurer que le livre en question n&#x27;est pas déjà dans un inventaire du magasin.</p>
<p>L&#x27;inventaire est ajouté à la collection <strong>Inventaire</strong> de l&#x27;objet <strong>Magasin</strong>. Cette étape permet d&#x27;assigner le champ <strong>MagasinId</strong> à l&#x27;enregistrement <strong>Inventaire</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void Generer(Magasin magasin, int min, int max)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Faker f = new Faker();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Détermine le nombre d&#x27;inventaires à générer pour ce magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int nbInventaire = f.Random.Number(min, max);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Le code ci-dessous permet de s&#x27;assurer que le même LivreId n&#x27;est pas pigé plusieurs fois.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;int&gt; lstLivreIdUtilise = new List&lt;int&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Inventaire inventaire = base.Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Vérifie s&#x27;il y a un inventaire pour ce magasin qui a déjà ce livre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (magasin.Inventaire.Count(i =&gt; i.LivreId == inventaire.LivreId) == 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Le livre n&#x27;a jamais été utilisé pour un inventaire de ce magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //L&#x27;inventaire est ajouté à la base de données, en assignant le MagasinId du magasin en cours</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            magasin.Inventaire.Add(inventaire);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            nbInventaire--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } while (nbInventaire &gt; 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-5">Test<a href="#test-5" class="hash-link" aria-label="Direct link to Test" title="Direct link to Test">​</a></h2>
<p>La mécanique est différente pour le <strong>Program.cs</strong>.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using GenerateurBDGestionLivre.Data.Context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using (GestionLivreContext db = new GestionLivreContext())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MagasinGenerateur magasinGenerateur = new MagasinGenerateur();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Obtenir la liste des clés EditeurId dans la base de de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;int&gt; lstLivreId = db.Livre.Select(l =&gt; l.LivreId).ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    InventaireGenerateur inventaireGenerateur = new InventaireGenerateur();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inventaireGenerateur.AssignerListeLivreId(lstLivreId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int i = 0; i &lt; 50; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère un magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Magasin magasin = magasinGenerateur.Generer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Génère les inventaires pour ce magasin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Il peut avoir entre 1 et tous les livres en inventaire pour ce magasin.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        inventaireGenerateur.Generer(magasin, 1, lstLivreId.Count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Nom : {magasin.Nom}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Adresse : {magasin.Adresse}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Ville : {magasin.Ville}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Code Postal : {magasin.CodePostal}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Ajoute dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Les inventaires associés à ce magasin seront également ajoutés</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.Add(magasin);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Enregistre dans la base de données</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db.SaveChanges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Il faut créer les 2 générateurs.</p>
<p>Dans le générateur <strong>InventaireGenerateur</strong>, il faut assigner la liste des livres qui existent déjà dans la base de données.</p>
<p>À la ligne 19, un magasin est généré à partir du générateur <strong>MagasinGenerateur</strong>.</p>
<p>Ensuite, à la ligne 23, les inventaires pour ce magasin sont générés.</p>
<p>Finalement, aux lignes 34 et 36, le magasin est ajouté dans le contexte et ensuite enregistré dans la base de données. Les inventaires qui ont été ajoutés dans la propriété <strong>Magasin.Inventaire</strong> sont également ajoutés. <strong>Entity Framework</strong> est en mesure d&#x27;assigner le <strong>MagasinId</strong> autogéréné à tous les enregistrements de la table <strong>Inventaire</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pour-le-tp2-1">Pour le TP2<a href="#pour-le-tp2-1" class="hash-link" aria-label="Direct link to Pour le TP2" title="Direct link to Pour le TP2">​</a></h2>
<p>Cette technique vous permettra de générer des données pour la table <strong>Achat</strong>. Il faudra choisir entre la table <strong>Client</strong> et <strong>Application</strong>   qui s&#x27;occupera d&#x27;ajouter les achats.</p>
<p>Dans le projet, <strong>GestionPersonnageApp</strong>, les générateurs des tables <strong>Film</strong> et  <strong>Distribution</strong> utilisent cette technique.</p>
<h1>Conclusion</h1>
<p>Pour le <strong>TP2</strong>, il faudra reproduire la génération des données en utilisant la structure par injection de dépendances.</p>
<p>Le document <strong>Application console avec injection de dépendances - Partie 4</strong> explique la marche à suivre.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/4N1_2024/docs/Entity Framework 2/EF_vue"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Vue</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4N1_2024/docs/Injection de dépendance/preparation_projet"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Préparation du projet</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#base-de-données-exemple" class="table-of-contents__link toc-highlight">Base de données exemple</a></li><li><a href="#nouvelle-application-console" class="table-of-contents__link toc-highlight">Nouvelle application console</a><ul><li><a href="#génération-du-contexte" class="table-of-contents__link toc-highlight">Génération du contexte</a></li><li><a href="#fichier-programcs" class="table-of-contents__link toc-highlight">Fichier Program.cs</a></li></ul></li><li><a href="#bogus" class="table-of-contents__link toc-highlight">Bogus</a></li><li><a href="#installation-de-la-librairie" class="table-of-contents__link toc-highlight">Installation de la librairie</a></li><li><a href="#classe-generateur" class="table-of-contents__link toc-highlight">Classe Generateur</a></li><li><a href="#extension-de-string---tronquer" class="table-of-contents__link toc-highlight">Extension de string - Tronquer</a></li><li><a href="#test" class="table-of-contents__link toc-highlight">Test</a></li><li><a href="#test-1" class="table-of-contents__link toc-highlight">Test</a></li><li><a href="#amélioration---utilisation-dune-propriété-de-référence" class="table-of-contents__link toc-highlight">Amélioration - Utilisation d&#39;une propriété de référence</a></li><li><a href="#test-2" class="table-of-contents__link toc-highlight">Test</a></li><li><a href="#test-3" class="table-of-contents__link toc-highlight">Test</a></li><li><a href="#modification-de-livregenerateur" class="table-of-contents__link toc-highlight">Modification de LivreGenerateur</a></li><li><a href="#test-4" class="table-of-contents__link toc-highlight">Test</a></li><li><a href="#pour-le-tp2" class="table-of-contents__link toc-highlight">Pour le TP2</a></li><li><a href="#magagingenerateur" class="table-of-contents__link toc-highlight">MagaginGenerateur</a></li><li><a href="#inventairegenerateur" class="table-of-contents__link toc-highlight">InventaireGenerateur</a></li><li><a href="#test-5" class="table-of-contents__link toc-highlight">Test</a></li><li><a href="#pour-le-tp2-1" class="table-of-contents__link toc-highlight">Pour le TP2</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>